<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper
	namespace="com.lib.fin.board.announcement.AnnouncementDAO">

	<select id="getList">
		SELECT * FROM BOARD_BASE WHERE BOARD_TYPE = 'A' ORDER
		BY BOARD_NO DESC
	</select>
	<insert id="addWriting">
		INSERT INTO BOARD_BASE
		(BOARD_TITLE,BOARD_CONTENT,BOARD_TYPE,BOARD_KIND,BOARD_VIEWS,BOARD_LIKE,REG_ID,MOD_ID,REG_DATE,MOD_DATE,USE_YN)
		VALUES
		(#{board_title},#{board_content},'A','C',0,0,#{board_writer},#{board_writer},NOW(),NOW(),'Y')
	</insert>

	<select id="getDetail">
		SELECT * FROM BOARD_BASE WHERE BOARD_NO = #{board_no}
	</select>

	<insert id="addComment" parameterType="CommentVO">
		INSERT INTO COMMENT_BASE
		(BOARD_NO, COMMENT_CONTENT, REG_ID, MOD_ID,
		REG_DATE, MOD_DATE, USE_YN)
		VALUES (#{board_no}, #{comment_content}, 'admin', 'admin', NOW(),
		NOW(),'Y')
	</insert>

	<select id="getComments" parameterType="Long"
		resultType="CommentVO">
		SELECT * FROM COMMENT_BASE WHERE BOARD_NO = #{board_no}
		ORDER BY COMMENT_NO DESC
	</select>

	  <update id="increaseLike" parameterType="long">
        UPDATE BOARD_BASE
        SET BOARD_LIKE = BOARD_LIKE + 1
        WHERE BOARD_NO = #{boardNo}
    </update>
</mapper>